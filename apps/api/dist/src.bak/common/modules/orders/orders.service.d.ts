import { PrismaService } from '../../prisma.service';
import { PosEventsGateway } from '../../ws/pos-events.gateway';
import { AuditService } from '../audit/audit.service';
import { NotificationsService } from '../notifications/notifications.service';
import { CreateOrderDto, AddOrderItemDto, ProcessPaymentDto, OrderQueryDto } from './dto/orders.dto';
import { Decimal } from '@prisma/client/runtime/library';
export declare class OrdersService {
    private prisma;
    private wsGateway;
    private audit;
    private notif;
    constructor(prisma: PrismaService, wsGateway: PosEventsGateway, audit: AuditService, notif: NotificationsService);
    findAll(tenantId: string, query: OrderQueryDto): Promise<{
        data: unknown;
        total: any;
        page: number;
        limit: number;
    }>;
    findOpenOrders(tenantId: string): Promise<unknown>;
    findById(tenantId: string, id: string): Promise<{
        items: {
            id: string;
            tenantId: string;
            createdAt: Date;
            productId: string;
            metadata: import("@prisma/client/runtime/library").JsonValue;
            notes: string | null;
            productVariantId: string | null;
            quantity: Decimal;
            modifiers: import("@prisma/client/runtime/library").JsonValue;
            modifiersTotal: Decimal;
            subtotal: Decimal;
            taxAmount: Decimal;
            discountAmount: Decimal;
            discountReason: string | null;
            orderId: string;
            unitPrice: Decimal;
            isVoid: boolean;
            voidReason: string | null;
            promotionId: string | null;
        }[];
        payments: {
            id: string;
            tenantId: string;
            createdAt: Date;
            currencyCode: string;
            method: string;
            amount: Decimal;
            reference: string | null;
            cashReceived: Decimal | null;
            orderId: string;
            splitId: string | null;
            processedBy: string | null;
            changeGiven: Decimal | null;
        }[];
    } & {
        id: string;
        tenantId: string;
        branchId: string | null;
        createdAt: Date;
        type: string;
        updatedAt: Date;
        total: Decimal;
        metadata: import("@prisma/client/runtime/library").JsonValue;
        customerId: string | null;
        notes: string | null;
        status: string;
        orderNumber: string;
        servedBy: string | null;
        shiftId: string | null;
        subtotal: Decimal;
        taxAmount: Decimal;
        discountAmount: Decimal;
        discountReason: string | null;
        openedAt: Date;
        closedAt: Date | null;
    }>;
    create(tenantId: string, userId: string, dto: CreateOrderDto): Promise<{
        items: {
            id: string;
            tenantId: string;
            createdAt: Date;
            productId: string;
            metadata: import("@prisma/client/runtime/library").JsonValue;
            notes: string | null;
            productVariantId: string | null;
            quantity: Decimal;
            modifiers: import("@prisma/client/runtime/library").JsonValue;
            modifiersTotal: Decimal;
            subtotal: Decimal;
            taxAmount: Decimal;
            discountAmount: Decimal;
            discountReason: string | null;
            orderId: string;
            unitPrice: Decimal;
            isVoid: boolean;
            voidReason: string | null;
            promotionId: string | null;
        }[];
    } & {
        id: string;
        tenantId: string;
        branchId: string | null;
        createdAt: Date;
        type: string;
        updatedAt: Date;
        total: Decimal;
        metadata: import("@prisma/client/runtime/library").JsonValue;
        customerId: string | null;
        notes: string | null;
        status: string;
        orderNumber: string;
        servedBy: string | null;
        shiftId: string | null;
        subtotal: Decimal;
        taxAmount: Decimal;
        discountAmount: Decimal;
        discountReason: string | null;
        openedAt: Date;
        closedAt: Date | null;
    }>;
    addItem(tenantId: string, orderId: string, dto: AddOrderItemDto): Promise<any>;
    voidItem(tenantId: string, orderId: string, itemId: string, reason: string): Promise<void>;
    processPayment(tenantId: string, orderId: string, userId: string, dto: ProcessPaymentDto): Promise<{
        payment: {
            id: string;
            tenantId: string;
            createdAt: Date;
            currencyCode: string;
            method: string;
            amount: Decimal;
            reference: string | null;
            cashReceived: Decimal | null;
            orderId: string;
            splitId: string | null;
            processedBy: string | null;
            changeGiven: Decimal | null;
        };
        orderStatus: string;
        totalPaid: number;
        remaining: number;
    }>;
    cancelOrder(tenantId: string, orderId: string, userId?: string): Promise<{
        id: string;
        tenantId: string;
        branchId: string | null;
        createdAt: Date;
        type: string;
        updatedAt: Date;
        total: Decimal;
        metadata: import("@prisma/client/runtime/library").JsonValue;
        customerId: string | null;
        notes: string | null;
        status: string;
        orderNumber: string;
        servedBy: string | null;
        shiftId: string | null;
        subtotal: Decimal;
        taxAmount: Decimal;
        discountAmount: Decimal;
        discountReason: string | null;
        openedAt: Date;
        closedAt: Date | null;
    }>;
    private recalculateOrderTotals;
    private generateOrderNumber;
    private getUserName;
}
