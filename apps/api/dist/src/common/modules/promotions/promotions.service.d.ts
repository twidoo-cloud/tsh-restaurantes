import { PrismaService } from '../../prisma.service';
import { Decimal } from '@prisma/client/runtime/library';
import { CreatePromotionDto, UpdatePromotionDto, PromotionQueryDto } from './dto/promotions.dto';
export declare class PromotionsService {
    private prisma;
    constructor(prisma: PrismaService);
    findAll(tenantId: string, query: PromotionQueryDto): Promise<{
        data: {
            description: string | null;
            id: string;
            tenantId: string;
            createdAt: Date;
            name: string;
            isActive: boolean;
            updatedAt: Date;
            priority: number;
            discountValue: Decimal;
            promoType: string;
            buyQuantity: number | null;
            getQuantity: number | null;
            scope: string;
            productIds: string[];
            categoryIds: string[];
            couponCode: string | null;
            minOrderAmount: Decimal;
            maxDiscountAmount: Decimal | null;
            maxUses: number | null;
            maxUsesPerOrder: number;
            currentUses: number;
            startDate: Date;
            endDate: Date | null;
            daysOfWeek: number[];
            startTime: string | null;
            endTime: string | null;
            isAutomatic: boolean;
            stackable: boolean;
        }[];
        total: number;
        page: number;
        limit: number;
        totalPages: number;
    }>;
    findById(tenantId: string, id: string): Promise<{
        appliedPromotions: {
            id: string;
            tenantId: string;
            createdAt: Date;
            metadata: import("@prisma/client/runtime/library").JsonValue;
            discountAmount: Decimal;
            orderId: string;
            promotionId: string;
            promoType: string;
            orderItemId: string | null;
            promoName: string;
        }[];
    } & {
        description: string | null;
        id: string;
        tenantId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        priority: number;
        discountValue: Decimal;
        promoType: string;
        buyQuantity: number | null;
        getQuantity: number | null;
        scope: string;
        productIds: string[];
        categoryIds: string[];
        couponCode: string | null;
        minOrderAmount: Decimal;
        maxDiscountAmount: Decimal | null;
        maxUses: number | null;
        maxUsesPerOrder: number;
        currentUses: number;
        startDate: Date;
        endDate: Date | null;
        daysOfWeek: number[];
        startTime: string | null;
        endTime: string | null;
        isAutomatic: boolean;
        stackable: boolean;
    }>;
    create(tenantId: string, dto: CreatePromotionDto): Promise<{
        description: string | null;
        id: string;
        tenantId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        priority: number;
        discountValue: Decimal;
        promoType: string;
        buyQuantity: number | null;
        getQuantity: number | null;
        scope: string;
        productIds: string[];
        categoryIds: string[];
        couponCode: string | null;
        minOrderAmount: Decimal;
        maxDiscountAmount: Decimal | null;
        maxUses: number | null;
        maxUsesPerOrder: number;
        currentUses: number;
        startDate: Date;
        endDate: Date | null;
        daysOfWeek: number[];
        startTime: string | null;
        endTime: string | null;
        isAutomatic: boolean;
        stackable: boolean;
    }>;
    update(tenantId: string, id: string, dto: UpdatePromotionDto): Promise<{
        description: string | null;
        id: string;
        tenantId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        priority: number;
        discountValue: Decimal;
        promoType: string;
        buyQuantity: number | null;
        getQuantity: number | null;
        scope: string;
        productIds: string[];
        categoryIds: string[];
        couponCode: string | null;
        minOrderAmount: Decimal;
        maxDiscountAmount: Decimal | null;
        maxUses: number | null;
        maxUsesPerOrder: number;
        currentUses: number;
        startDate: Date;
        endDate: Date | null;
        daysOfWeek: number[];
        startTime: string | null;
        endTime: string | null;
        isAutomatic: boolean;
        stackable: boolean;
    }>;
    toggleActive(tenantId: string, id: string): Promise<{
        description: string | null;
        id: string;
        tenantId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        priority: number;
        discountValue: Decimal;
        promoType: string;
        buyQuantity: number | null;
        getQuantity: number | null;
        scope: string;
        productIds: string[];
        categoryIds: string[];
        couponCode: string | null;
        minOrderAmount: Decimal;
        maxDiscountAmount: Decimal | null;
        maxUses: number | null;
        maxUsesPerOrder: number;
        currentUses: number;
        startDate: Date;
        endDate: Date | null;
        daysOfWeek: number[];
        startTime: string | null;
        endTime: string | null;
        isAutomatic: boolean;
        stackable: boolean;
    }>;
    delete(tenantId: string, id: string): Promise<{
        success: boolean;
    }>;
    getApplicablePromotions(tenantId: string, orderId: string): Promise<{
        description: string | null;
        id: string;
        tenantId: string;
        createdAt: Date;
        name: string;
        isActive: boolean;
        updatedAt: Date;
        priority: number;
        discountValue: Decimal;
        promoType: string;
        buyQuantity: number | null;
        getQuantity: number | null;
        scope: string;
        productIds: string[];
        categoryIds: string[];
        couponCode: string | null;
        minOrderAmount: Decimal;
        maxDiscountAmount: Decimal | null;
        maxUses: number | null;
        maxUsesPerOrder: number;
        currentUses: number;
        startDate: Date;
        endDate: Date | null;
        daysOfWeek: number[];
        startTime: string | null;
        endTime: string | null;
        isAutomatic: boolean;
        stackable: boolean;
    }[]>;
    applyPromotionsToOrder(tenantId: string, orderId: string): Promise<{
        discounts: {
            promotionId: string;
            promoName: string;
            promoType: string;
            amount: number;
            itemId?: string;
        }[];
        totalDiscount: number;
    }>;
    applyCoupon(tenantId: string, orderId: string, couponCode: string): Promise<{
        promoName: string;
        discountAmount: number;
        couponCode: string;
    }>;
    removePromotion(tenantId: string, orderId: string, promotionId: string): Promise<{
        success: boolean;
        removedDiscount: number;
    }>;
    getOrderPromotions(tenantId: string, orderId: string): Promise<({
        promotion: {
            id: string;
            name: string;
            promoType: string;
            couponCode: string;
        };
    } & {
        id: string;
        tenantId: string;
        createdAt: Date;
        metadata: import("@prisma/client/runtime/library").JsonValue;
        discountAmount: Decimal;
        orderId: string;
        promotionId: string;
        promoType: string;
        orderItemId: string | null;
        promoName: string;
    })[]>;
    private calculateDiscount;
    private recalcOrderWithDiscount;
}
